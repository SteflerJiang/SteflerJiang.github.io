<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="音浪 太强 不晃 会被撞到地上">
<meta property="og:type" content="website">
<meta property="og:title" content="蒋士正的博客">
<meta property="og:url" content="https://steflerjiang.github.io/page/2/index.html">
<meta property="og:site_name" content="蒋士正的博客">
<meta property="og:description" content="音浪 太强 不晃 会被撞到地上">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="蒋士正的博客">
<meta name="twitter:description" content="音浪 太强 不晃 会被撞到地上">






  <link rel="canonical" href="https://steflerjiang.github.io/page/2/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>蒋士正的博客</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">蒋士正的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">前游戏热爱者</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://steflerjiang.github.io/2017/03/23/Paxos算法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="蒋士正">
      <meta itemprop="description" content="音浪 太强 不晃 会被撞到地上">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蒋士正的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/03/23/Paxos算法/" class="post-title-link" itemprop="url">Paxos算法</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-03-23 19:27:16" itemprop="dateCreated datePublished" datetime="2017-03-23T19:27:16+08:00">2017-03-23</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-25 02:47:14" itemprop="dateModified" datetime="2019-03-25T02:47:14+08:00">2019-03-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/算法/" itemprop="url" rel="index"><span itemprop="name">算法</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>Paxos算法是莱斯利·兰伯特(Leslie Lamport)于1990年提出的一种基于消息传递且具有高度容错性的一致性算法，是目前公认的解决分布式一致性问题最有效的算法之一。</p>
<p>两篇经典论文</p>
<ol>
<li><a href="http://lamport.azurewebsites.net/pubs/lamport-paxos.pdf" target="_blank" rel="noopener">The Part-Time Parliament</a></li>
<li><a href="http://lamport.azurewebsites.net/pubs/paxos-simple.pdf" target="_blank" rel="noopener">Paxos Made Simple</a></li>
</ol>
<p>我主要针对《从Paxos到Zookeeper分布式一致性原理与实现<br>》书里第二章的内容和《Paxos Made Simple》论文的原文，对Paxos算法进行详细的阐述。</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2017/03/23/Paxos算法/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://steflerjiang.github.io/2017/03/20/Java8的lambda和默认方法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="蒋士正">
      <meta itemprop="description" content="音浪 太强 不晃 会被撞到地上">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蒋士正的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/03/20/Java8的lambda和默认方法/" class="post-title-link" itemprop="url">Java8的lambda和默认方法</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-03-20 11:48:10" itemprop="dateCreated datePublished" datetime="2017-03-20T11:48:10+08:00">2017-03-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-25 02:47:14" itemprop="dateModified" datetime="2019-03-25T02:47:14+08:00">2019-03-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Labmda"><a href="#Labmda" class="headerlink" title="Labmda"></a>Labmda</h1><p>Lambda的基本语法是</p>
<p><code>(parameters) -&gt; expression</code></p>
<p>或者</p>
<p><code>(parameters) -&gt; {expression;}</code></p>
<p>这里讨论一种异常情况。假设你用与Runnable同样的签名声明了一个函数接口，我们称之为Task。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Task</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">exexute</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">(Runnable r)</span> </span>&#123;r.run();&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">(Task t)</span> </span>&#123;t.execute();&#125;</span><br></pre></td></tr></table></figure>
<p>如果我们用以前的匿名类是没问题的:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">doSomething(<span class="keyword">new</span> Task() &#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">execute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Danger danger!!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>但是将这种匿名类转换为Lambda表达式时，就导致了一种晦涩的方法调用，因为Runnable和Task都是合法的目标类型：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">doSomething(() -&gt; System.out.println(<span class="string">"Danger danger!!"</span>));</span><br></pre></td></tr></table></figure>
<p>这时候编译器会报一个编译的异常，<code>Ambigulous method call</code>，这时候需要对Task尝试使用显示的类型转换来解决这种模棱两可的情况:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">doSomething((Task)() -&gt; System.out.println(<span class="string">"Danger danger!!"</span>));</span><br></pre></td></tr></table></figure>
<h1 id="接口默认方法"><a href="#接口默认方法" class="headerlink" title="接口默认方法"></a>接口默认方法</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>Java8引入了一种新的机制。Java8中的接口现在支持在声明方法的同事提供实现。通过两种方式可以完成这种操作。</p>
<ol>
<li>Java8允许在接口内声明静态方法。</li>
<li>Java8引入了一个新功能，叫<em>默认方法</em>。</li>
</ol>
<p>在新的Collection接口中的stream和List接口中的sort都是这样的。定义如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">default</span> Stream&lt;E&gt; <span class="title">stream</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> StreamSupport.stream(spliterator(), <span class="keyword">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(&#123;<span class="string">"unchecked"</span>, <span class="string">"rawtypes"</span>&#125;)</span><br><span class="line"><span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparator&lt;? <span class="keyword">super</span> E&gt; c)</span> </span>&#123;</span><br><span class="line">    Object[] a = <span class="keyword">this</span>.toArray();</span><br><span class="line">    Arrays.sort(a, (Comparator) c);</span><br><span class="line">    ListIterator&lt;E&gt; i = <span class="keyword">this</span>.listIterator();</span><br><span class="line">    <span class="keyword">for</span> (Object e : a) &#123;</span><br><span class="line">        i.next();</span><br><span class="line">        i.set((E) e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>默认方法设计的目的是为了解决<strong>向接口添加方法</strong>。</p>
<h2 id="Java8中的抽象类和抽象接口"><a href="#Java8中的抽象类和抽象接口" class="headerlink" title="Java8中的抽象类和抽象接口"></a>Java8中的抽象类和抽象接口</h2><p>那么既然接口也能实现方法，抽象类也能实现方法，区别如下：</p>
<ol>
<li>一个类只能继承一个抽象类，但是一个类可以实现多个接口。</li>
<li>一个抽象类可以通过实例变量(字段)保存一个通用状态，而接口是不能有实例变量的。</li>
</ol>
<h2 id="解决冲突的规则"><a href="#解决冲突的规则" class="headerlink" title="解决冲突的规则"></a>解决冲突的规则</h2><p>先看下面的场景<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello from A"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello from B"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">implements</span> <span class="title">B</span>, <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> C().hello();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>###解决问题的三条规则<br>如果一个类使用相同的函数前面从多个地方继承了方法，通过三条规则可以进行判断。</p>
<ol>
<li>类中的方法优先级最高。类或父类中声明的方法的优先级高于任何声明为默认方法的优先级。</li>
<li>如果无法依据第一条进行判断，那么子接口的优先级更高：函数前面相同时，优先选择拥有最具体实现的默认方法的接口，即如果B继承了A，那么B就比A更加具体。</li>
<li>最好，如果还是无法判断，继承了多个接口的类必须通过显示覆盖和调用期望的方法，显示地选择使用哪一个默认方法的实现。</li>
</ol>
<p>Java8引入了一种新的语法<code>X.super.m()</code>，其中X是你希望调用的m方法所在的父接口。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://steflerjiang.github.io/2017/03/18/使用Automata来索引1-600-000-000个键/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="蒋士正">
      <meta itemprop="description" content="音浪 太强 不晃 会被撞到地上">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蒋士正的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/03/18/使用Automata来索引1-600-000-000个键/" class="post-title-link" itemprop="url">使用自动机来索引1,600,000,000个键</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-03-18 15:01:18" itemprop="dateCreated datePublished" datetime="2017-03-18T15:01:18+08:00">2017-03-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-25 02:47:14" itemprop="dateModified" datetime="2019-03-25T02:47:14+08:00">2019-03-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/数据结构/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本文翻译自<a href="http://blog.burntsushi.net/transducers/" target="_blank" rel="noopener">Index 1,600,000,000 Keys with Automata and Rust</a>，所以标题也直译过来。</p>
<p>有限状态机(FSM, finite state machine)可以用来紧密地存储有序集合和有序键值对，并且可以实现快速搜索。本文中，我会表明怎样用FSM来作为数据结构存储这样的数据。</p>
<h1 id="FSM作为数据结构"><a href="#FSM作为数据结构" class="headerlink" title="FSM作为数据结构"></a>FSM作为数据结构</h1><p>FSM是一个状态的集合和状态转移的集合。一个起始状态，0个或多个结束状态。一个FSM在同一时间只有一个状态。</p>
<p>FSM非常常见，并且可以用来描述一系列过程。比如我家猫咪Cauchy一天的日常生活:</p>
<p><img src="/images/fst/cauchy.png" alt="Cauchy的一天" title="Cauchy的一天"></p>
<p>里面有一些”asleep”或者”eating”的状态，一些转移”food is served”, “something moved”。这里没有结束状态，如果结束了，那真是太恐怖了！</p>
<p>FSM近似的表达了现实中的情况。Cauchy不可能同时吃饭和睡觉，这跟FSM中同一时刻只有一个状态是一样的。并且，从一个状态转移到另一个状态需要外部环境的一个输出。需要睡觉，可能是因为”吃饱了”, “累了”等等。不管他睡得多死，”听到外面的声音”，它总会醒过来。</p>
<h2 id="有序集合"><a href="#有序集合" class="headerlink" title="有序集合"></a>有序集合</h2><p>有序集合里的键按照字典序排序。典型的应用是二叉查找树和B树。无序集合，典型应用就是哈希表。这里，我们先描述一个确定无环有限状态接收器(deterministic acyclic finite state acceptor)，即FSA。</p>
<p>一个FSA需要满足以下条件：</p>
<ul>
<li>确定性的。给定已给输入，最多只能转移到一个状态。</li>
<li>无环的。不能反序遍历。</li>
<li>接收器。FSA可以接收一系列特定的输入。</li>
</ul>
<p>那么，怎么用这些特性来表示一个集合呢。诀窍在于，key作为FSA的状态转移。这样，给定一个输入key，我们可以知道这个key这个key是否在FSA中。</p>
<p>假设一个集合，只有一个key”jul”。FSA就像下面这样：</p>
<p><img src="/images/fst/set1.png" alt="集合1" title="集合1"></p>
<p>这时候如果问FSA，是否包含”jul”。处理顺序如下：</p>
<ul>
<li>给定j，FSA状态从0变为1.</li>
<li>给定u，FSA状态从1变为2.</li>
<li>给定l，FSA状态从2变为3.</li>
</ul>
<p>输入结束，这时候判断一下FSA是否处在final状态(图中用双圈表示)，表明jul确实在set中。</p>
<p>这时候如果问FSA，是否包含”jun”。处理顺序如下：</p>
<ul>
<li>给定j，FSA状态从0变为1.</li>
<li>给定u，FSA状态从1变为2.</li>
<li>给定l，FSA不动，处理结束。</li>
</ul>
<p>FSA不动，因为状态2只接收’l’的转移，但是当前输入为’n’。因此处理结束，也表明集合中不包含”jun”。</p>
<p>这时候如果问FSA，是否包含”ju”。处理顺序如下：</p>
<ul>
<li>给定j，FSA状态从0变为1.</li>
<li>给定u，FSA状态从1变为2.</li>
</ul>
<p>判断一下，此时是否处于final状态。</p>
<p>值得注意的是，判断一个key是否存在，受限于key的长度，而不是set的大小。</p>
<p>下面把key”mar”添加到FSA中去，这时候FSA的表现如下：</p>
<p><img src="/images/fst/set2.png" alt="集合2" title="集合2"></p>
<p>FSA变得稍微复杂一点，状态0可以有两个转移。如果起始输入mar，它会先转移到1状态。</p>
<p>还有一个需要注意的是，状态3被jul和mar两个key共享。即，状态3可以由l和r转移过来。这种共享的方式，可以用更少的空间保存更多的信息。</p>
<p>如果再加入jun，FSA表现如下：</p>
<p><img src="/images/fst/set3.png" alt="集合3" title="集合3"></p>
<p>看到变化了么？只有一点点变化。FSA看起来和之前的几乎没什么区别。唯一变化的地方在状态5多了一个转移。FSA其实没有新增状态节点，因为jun和jul共享了前缀ju</p>
<p>下面展示一个更复杂的FSA，包含三个key，october，november，december。</p>
<p><img src="/images/fst/set3-suffixes.png" alt="集合3" title="集合3后缀"></p>
<p>因为有相同的后缀ber，在FSA中只需要编码一次就行了。两个key有更大的相同的后缀，ember。</p>
<p>在介绍FST之前，我们先看看，如何来遍历FSA中所有的key呢？</p>
<p>为了阐述这个过程，还用一个之前的一个简单的图，有三个key，jul，jun和mar。</p>
<p><img src="/images/fst/set3.png" alt="集合3" title="集合3"></p>
<p>遍历方式如下：</p>
<ul>
<li>初始化状态0</li>
<li>移动到状态4，把j添加到key中</li>
<li>移动到状态5，把u添加到key中</li>
<li>移动到状态3，把l添加到key中，输出jul</li>
<li>返回状态5，把key中的l抛弃掉</li>
<li>移动到状态3，把n添加到key中，输出jun</li>
<li>返回状态5，把key中的n抛弃掉</li>
<li>返回状态4，把key中的u抛弃掉</li>
<li>返回状态0，把key中的j抛弃掉</li>
<li>移动到状态1，把m添加到key中</li>
<li>移动到状态2，把a添加到key中</li>
<li>移动到状态3，把r添加到key中，输出mar</li>
</ul>
<p>这个算法直接应用一个栈存储访问过的状态，和一个栈存储相应的转移。时间复杂度为O(n)，空间复杂度O(k)，k是set中最长的键的大小。</p>
<h2 id="有序map"><a href="#有序map" class="headerlink" title="有序map"></a>有序map</h2><p>和有序集合类似，只是多了一个输出。有序map常用在二叉查找树和b树，无序map就是hashtbale。这里我们介绍一个deterministic acyclic finite state transducer，确定无环有限状态转移器，FST。</p>
<p>FST满足以下特性：</p>
<ul>
<li>确定性。</li>
<li>无环。</li>
<li>一个转移器。给定一系列输入，会输出一个值。当且仅当输入会达到FST的final状态。</li>
</ul>
<p>FST和FSA很像，但是对于一个key，FSA只回答了”yer or no”，FST不仅回答”yes or no”，还好返回和这个key相关的一个值。</p>
<p>在有序集合中，只需要把key保存在转移时。但是在这里，还需返回与key对于的value。</p>
<p>一种方法是，在每次转移的时候添加一些值。当输入序列在状态之间转移的时候，输出序列也在慢慢增加。</p>
<p>还是看一个简单的例子吧。map中只包含一个数据jul，对应的value为7:</p>
<p><img src="/images/fst/map1.png" alt="map1" title="map1"></p>
<p>这和上面的集合差不多，只是在第一个转移状态j之后多了一个相关联的输出7.另外的转移u和l对应的输出都是0，所以图中就不显示了.</p>
<p>如果要判断，FST中是否存在key”jul”，并且需要对应的返回值，处理过程如下：</p>
<ul>
<li>初始化value为0</li>
<li>给定输入j,FST从状态0转移到1，value+7</li>
<li>给定输入u，FST从状态1转移到2，value+0</li>
<li>给定输入l，FST从状态2转移到3，value+0</li>
</ul>
<p>输入结束，状态3为final状态，因此key存在，value为7</p>
<p>下面把k-v,”mar 3”添加到FST中</p>
<p><img src="/images/fst/map2.png" alt="map2" title="map2"></p>
<p>在起始节点，多了一个新的转移m，对应输出为3.如果我们查询jul，那么应该和上面是一样的处理过程。</p>
<p>继续，当添加一个有相同前缀的key，会发生什么呢？<br>添加key jun，value 6</p>
<p><img src="/images/fst/map3.png" alt="map3" title="map3"></p>
<p>在状态5和状态3之间添加了一个转移n。但是还有另外两个变化</p>
<ol>
<li>0-&gt;4转移j输入对应输出从7变成了6.</li>
<li>5-&gt;3转移l输入对应输出从0变成了1.</li>
</ol>
<p>这个变化之后们可以正确查询jun和jul，并且返回正确的值。</p>
<p>这种key的属性确保了，即使共享前缀，对于每一个key，然后只有一个唯一的路径可以贯穿整个machine。因此，每个key也有唯一的value。我们要做的就是怎么把这些输出放在转移中去。</p>
<p>其实不仅可以共享前缀，还可以共享后缀。对于两个key tuesday和thursday，分别对于输出3和5.</p>
<p><img src="/images/fst/map2-suffixes.png" alt="map后缀" title="map后缀&quot;"></p>
<p>这两个key有相同的前缀t，相同的后缀sday，按照图里的方式可以保证输出的正确性。</p>
<p>这里在描述输出的时候，其实有一点局限，如果输出不是整形。确实，在FST里用做输出的类型必须满足以下特性：</p>
<ul>
<li>加法</li>
<li>减法</li>
<li>取前缀（对于整数来说就是min）</li>
</ul>
<h2 id="构建"><a href="#构建" class="headerlink" title="构建"></a>构建</h2><h3 id="Trie树构建"><a href="#Trie树构建" class="headerlink" title="Trie树构建"></a>Trie树构建</h3><p>trie树，前缀树。和FSA的区别在于，FSA可以共享前缀和后缀。对于键mon，tues，thus来说，FSA如下：</p>
<p><img src="/images/fst/days3.png" alt="FSA" title="FSA"></p>
<p>而trie树只共享前缀，如下：<br><img src="/images/fst/days3-trie.png" alt="Trie" title="Trie"></p>
<p>构建trie树很直接的，对于一个给定的输入，只需要去看看有没有相同的前缀。直到找出相同的前缀，余下的直接转移到一个final状态就可以了。</p>
<h3 id="FSA构建"><a href="#FSA构建" class="headerlink" title="FSA构建"></a>FSA构建</h3><p>FSA和trie的区别在于，共享后缀。因此一个FSA的空间会比trie少很多，但是构建起来却更复杂，因此我们如果按照key的字典序插入的话，会好很多，还是用图片来说明。</p>
<p>对于三个key，mon，tues和thurs。按照字典序，插入顺序mon，thurs和tues。先插入mon：</p>
<p><img src="/images/fst/days3-fsa-1.png" alt="插入mon" title="插入mon"></p>
<p>下面插入thurs:</p>
<p><img src="/images/fst/days3-fsa-2.png" alt="插入thurs" title="插入thurs"></p>
<p>插入thurs的时候，会导致之前的mon被冻结。当FSA中一部分被冻结的时候，我们知道，它以后再也不会被更改了。因为按照字典序排序的，后面的key肯定都是大于等于thurs的。因此不会和mon有相同前缀的key插入了。蓝色的state代表被冻结住，以后不会被更改但是可以被复用。</p>
<p>虚线的状态表示thurs还没有被真正加入到FSA中去，下面插入tues：</p>
<p><img src="/images/fst/days3-fsa-3.png" alt="插入tues" title="插入tues"></p>
<p>在这一步里，我们可以确定hurs会被冻住。因为将会不会有和它有相同前缀的词插入进来了。因为thurs和mon可以有相同的final state了。</p>
<p>这里状态4仍然是虚线，因为还不能确定t开头的key还有没有了。如果下面插入zon：</p>
<p><img src="/images/fst/days3-fsa-4.png" alt="插入zon" title="插入zon"></p>
<p>看到，这时状态4已经被冻住了，因为不会在有t开头的key出现了，另外thurs和tues有一个共同的后缀s，因此状态7和状态9被合并了。</p>
<p>最后，在结束操作以后，把FSA的最后一部分冻住，一个完整的没有重复的结构如下：</p>
<p><img src="/images/fst/days3-fsa-5.png" alt="完成的FSA" title="完成的FSA"></p>
<p>因为mon和zon有相同的后缀，因此它们除了第一个状态转移不一样，剩下的可以重复利用。</p>
<h3 id="FST构建"><a href="#FST构建" class="headerlink" title="FST构建"></a>FST构建</h3><p>下面快速说一下FST构建，插入键值对 mon-2，tues-3，thurs-5.</p>
<p>直接上图，插入mon-2</p>
<p><img src="/images/fst/days3-fst-1.png" alt="FST1" title="FST1"></p>
<p>对于第一步，我们也可以这样分配输出的值</p>
<p><img src="/images/fst/days3-fst-1-alt.png" alt="FST1-alt" title="FST1-alt"></p>
<p>其实这样也是可以的，但是在算法上来说，把输出放在靠近初始状态的地方，代码写起来更简单。</p>
<p>插入thurs-5</p>
<p><img src="/images/fst/days3-fst-2.png" alt="FST2" title="FST2"></p>
<p>插入tues-3</p>
<p><img src="/images/fst/days3-fst-3.png" alt="FST3" title="FST3"></p>
<p>在把状态0-4之间的输出从5变为3的之后，需要把4之后所有的输出全部加2，除了新添加的key，这样就可以保持输出的平衡。</p>
<p>下面插入一个tye-99</p>
<p><img src="/images/fst/days3-fst-4.png" alt="FST4" title="FST4"></p>
<p>最后的完全形态</p>
<p><img src="/images/fst/days3-fst-5.png" alt="FST5" title="FST5"></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://steflerjiang.github.io/2017/03/10/Lucene索引内存结构/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="蒋士正">
      <meta itemprop="description" content="音浪 太强 不晃 会被撞到地上">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蒋士正的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/03/10/Lucene索引内存结构/" class="post-title-link" itemprop="url">Lucene索引内存结构</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-03-10 11:47:23" itemprop="dateCreated datePublished" datetime="2017-03-10T11:47:23+08:00">2017-03-10</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-25 02:47:14" itemprop="dateModified" datetime="2019-03-25T02:47:14+08:00">2019-03-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Solr/" itemprop="url" rel="index"><span itemprop="name">Solr</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>Lucene索引在内存中的结构主要分为三个部分: field, term, docId，具体如下。</p>
<h1 id="Field在内存中的组织结构"><a href="#Field在内存中的组织结构" class="headerlink" title="Field在内存中的组织结构"></a>Field在内存中的组织结构</h1><p>field-&gt;fileposition，域名对应在文件中的偏移量，<code>TreeMap&lt;String,Long&gt; fields = new TreeMap&lt;&gt;();</code>.</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2017/03/10/Lucene索引内存结构/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://steflerjiang.github.io/2017/01/19/Google-Java风格指南/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="蒋士正">
      <meta itemprop="description" content="音浪 太强 不晃 会被撞到地上">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蒋士正的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/01/19/Google-Java风格指南/" class="post-title-link" itemprop="url">Google Java风格指南</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-01-19 10:27:32" itemprop="dateCreated datePublished" datetime="2017-01-19T10:27:32+08:00">2017-01-19</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-25 02:47:14" itemprop="dateModified" datetime="2019-03-25T02:47:14+08:00">2019-03-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>转载一篇Google的Java编程风格指南，自己手打一遍，也算是阅读，顺带添加以下原文和自己的理解。</p>
<p><a href="http://www.hawstein.com/posts/google-java-style.html" target="_blank" rel="noopener">参考文章</a></p>
<p><a href="https://google.github.io/styleguide/javaguide.html" target="_blank" rel="noopener">原文</a></p>
<h1 id="1-简介-Introduction"><a href="#1-简介-Introduction" class="headerlink" title="1 简介 Introduction"></a>1 简介 Introduction</h1><blockquote>
<p>This document serves as the complete definition of Google’s coding standards for source code in the Java™ Programming Language. A Java source file is described as being in Google Style if and only if it adheres to the rules herein.</p>
</blockquote>
<blockquote>
<p>Like other programming style guides, the issues covered span not only aesthetic issues of formatting, but other types of conventions or coding standards as well. However, this document focuses primarily on the hard-and-fast rules that we follow universally, and avoids giving advice that isn’t clearly enforceable (whether by human or tool).</p>
</blockquote>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2017/01/19/Google-Java风格指南/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://steflerjiang.github.io/2017/01/12/windows查看端口占用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="蒋士正">
      <meta itemprop="description" content="音浪 太强 不晃 会被撞到地上">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蒋士正的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/01/12/windows查看端口占用/" class="post-title-link" itemprop="url">windows查看端口占用</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-01-12 13:47:40" itemprop="dateCreated datePublished" datetime="2017-01-12T13:47:40+08:00">2017-01-12</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-25 02:47:14" itemprop="dateModified" datetime="2019-03-25T02:47:14+08:00">2019-03-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/杂/" itemprop="url" rel="index"><span itemprop="name">杂</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>运行命令行或者cmd+r</li>
<li>执行命令<code>netstat -ano</code>查看端口占用情况</li>
<li>查看被占用端口对应的PID，输入命令：netstat -ano|findstr “49157”</li>
<li>继续输入tasklist|findstr “2720”，回车，查看是哪个进程或者程序占用了2720端口，结果是：svchost.exe</li>
<li>或者打开任务管理器ctrl + shift + esc 查找对应PID 然后kill掉</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://steflerjiang.github.io/2017/01/07/Solr6-3快速入门/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="蒋士正">
      <meta itemprop="description" content="音浪 太强 不晃 会被撞到地上">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蒋士正的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/01/07/Solr6-3快速入门/" class="post-title-link" itemprop="url">Solr6.3快速入门</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-01-07 15:14:53" itemprop="dateCreated datePublished" datetime="2017-01-07T15:14:53+08:00">2017-01-07</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-25 02:47:14" itemprop="dateModified" datetime="2019-03-25T02:47:14+08:00">2019-03-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Solr/" itemprop="url" rel="index"><span itemprop="name">Solr</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>刚入门做Java，做Solr一个多月了，其实还是了解点皮毛，今天正好看了官方的pdf，从入门开始说起吧。</p>
<p>平时开发是在Windows环境下的，就说说Windows吧<br>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2017/01/07/Solr6-3快速入门/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </p></div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://steflerjiang.github.io/2017/01/06/Redis设计与实现-第8章-对象/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="蒋士正">
      <meta itemprop="description" content="音浪 太强 不晃 会被撞到地上">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蒋士正的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/01/06/Redis设计与实现-第8章-对象/" class="post-title-link" itemprop="url">Redis设计与实现-第8章-对象</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-01-06 19:56:25" itemprop="dateCreated datePublished" datetime="2017-01-06T19:56:25+08:00">2017-01-06</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-25 02:47:14" itemprop="dateModified" datetime="2019-03-25T02:47:14+08:00">2019-03-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Redis/" itemprop="url" rel="index"><span itemprop="name">Redis</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>前面陆续介绍了Redis用到的所有主要数据结构。但是Redis并没有<strong>直接</strong>使用这些数据结构来实现键值对数据库，而是给予这些数据结构创建了一个对象系统，这个系统包含字符串对象、列表对象、哈希对象、集合对象和有序集合对象这五种类型的对象，每种对象都用到了至少一种我们前面所介绍的数据结构。</p>
<p>好处是：</p>
<ul>
<li>可以根据对象的类型来判断一个对象是否可以执行给定的命令</li>
<li>针对不同的使用场景来为对象设置多种不同的数据结构实现，从而优化对象在不同场景下的使用效率</li>
</ul>
<p>Redis的对象系统实现了基于引用计数的的内存回收机制；还通过引用技术技术实现了对象共享机制，可以让多个数据库键共享同一个对象来节约内存。</p>
<p>Redis对象带有访问时间记录信息，该信息可以同于计算数据库键的空转时长，在服务器启用了maxmemory功能的情况下，空转时长较大的那些键可能会有点被服务器删除。</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2017/01/06/Redis设计与实现-第8章-对象/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://steflerjiang.github.io/2017/01/05/Redis设计与实现-第7章-压缩列表/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="蒋士正">
      <meta itemprop="description" content="音浪 太强 不晃 会被撞到地上">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蒋士正的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/01/05/Redis设计与实现-第7章-压缩列表/" class="post-title-link" itemprop="url">Redis设计与实现-第7章-压缩列表</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-01-05 15:48:15" itemprop="dateCreated datePublished" datetime="2017-01-05T15:48:15+08:00">2017-01-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-25 02:47:14" itemprop="dateModified" datetime="2019-03-25T02:47:14+08:00">2019-03-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Redis/" itemprop="url" rel="index"><span itemprop="name">Redis</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>压缩列表(ziplist)是列表键和哈希键的底层实现之一。当一个列表键只包含少量列表项，并且每个列表项要么就是小整数值，要么就是长度比较段的字符串，那么Redis就会使用压缩列表来做列表键的底层实现。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">redis&gt;</span> RPUSH lst 1 3 5 10086 "hello" "world"</span><br><span class="line">(integer) 6</span><br><span class="line"></span><br><span class="line"><span class="meta">redis&gt;</span> OBJECT ENCODING lst</span><br><span class="line">"ziplist"</span><br></pre></td></tr></table></figure>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2017/01/05/Redis设计与实现-第7章-压缩列表/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://steflerjiang.github.io/2017/01/05/Redis设计与实现-第6章-整数集合/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="蒋士正">
      <meta itemprop="description" content="音浪 太强 不晃 会被撞到地上">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蒋士正的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/01/05/Redis设计与实现-第6章-整数集合/" class="post-title-link" itemprop="url">Redis设计与实现-第6章-整数集合</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-01-05 15:10:44" itemprop="dateCreated datePublished" datetime="2017-01-05T15:10:44+08:00">2017-01-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-25 02:47:14" itemprop="dateModified" datetime="2019-03-25T02:47:14+08:00">2019-03-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Redis/" itemprop="url" rel="index"><span itemprop="name">Redis</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>整数集合（intset）是集合键的底层实现之一，当一个集合只包含整数值元素，并且这个集合的元素数量不多时，Redis就会使用整数集合作为集合键的底层实现。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">redis&gt;</span> SADD numbers 1 3 5 7 9</span><br><span class="line">(integer) 5</span><br><span class="line"></span><br><span class="line"><span class="meta">redis&gt;</span> OBJECT ENCODING numbers</span><br><span class="line">"intset"</span><br></pre></td></tr></table></figure>
<h2 id="整数集合的实现"><a href="#整数集合的实现" class="headerlink" title="整数集合的实现"></a>整数集合的实现</h2><p>整数集合是Redis用于保存整数值的集合抽象数据结构，它可以保存类型为int16_t、int32_t或者int64_t的整数值，并且保证集合中不会出现重复元素。</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2017/01/05/Redis设计与实现-第6章-整数集合/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">蒋士正</p>
              <div class="site-description motion-element" itemprop="description">音浪 太强 不晃 会被撞到地上</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">32</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">10</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">22</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">蒋士正</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.0.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/schemes/muse.js?v=7.0.1"></script>



  

  


  <script src="/js/src/next-boot.js?v=7.0.1"></script>


  

  

  

  



  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
